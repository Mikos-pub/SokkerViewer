CREATE TABLE LEAGUES( LEAGUE_ID INTEGER NOT NULL, NAME VARCHAR, COUNTRY_ID INTEGER, DIVISION INTEGER, TYPE INTEGER, IS_OFFICIAL INTEGER, IS_CUP INTEGER, USER_ID INTEGER, CONSTRAINT LEAGUES_LEAGUE_ID_PKEY PRIMARY KEY(LEAGUE_ID))
CREATE TABLE MATCHES_TEAM( MATCH_ID INTEGER NOT NULL, LEAGUE_ID INTEGER, ROUND INTEGER, SEASON INTEGER, WEEK INTEGER, HOME_TEAM_ID INTEGER, AWAY_TEAM_ID INTEGER, HOME_TEAM_NAME VARCHAR, AWAY_TEAM_NAME VARCHAR, DAY INTEGER, DATE_EXPECTED TIMESTAMP, DATE_STARTED TIMESTAMP, HOME_TEAM_SCORE INTEGER, AWAY_TEAM_SCORE INTEGER, SUPPORTERS INTEGER, WEATHER INTEGER, IS_FINISHED INTEGER, CONSTRAINT MATCHES_TEAM_PKEY PRIMARY KEY(MATCH_ID), CONSTRAINT MATCHES_TEAM_LEAGUE_ID_FKEY FOREIGN KEY(LEAGUE_ID) REFERENCES LEAGUES(LEAGUE_ID) ON DELETE CASCADE)
CREATE TABLE LEAGUE_TEAM( TEAM_ID INTEGER NOT NULL, LEAGUE_ID INTEGER, SEASON INTEGER, ROUND INTEGER, POINTS INTEGER, WINS INTEGER, DRAWS INTEGER, LOSSES INTEGER, GOALS_SCORED INTEGER, GOALS_LOST INTEGER, RANK_TOTAL VARCHAR, CONSTRAINT LEAGUE_TEAM_PKEY PRIMARY KEY(TEAM_ID, LEAGUE_ID, SEASON, ROUND))
CREATE TABLE TEAM_STATS( MATCH_ID INTEGER NOT NULL, TEAM_ID INTEGER NOT NULL, TIME_ON_HALF INTEGER, TIME_POSSESSION INTEGER, OFFSIDES INTEGER, SHOOTS INTEGER, FOULS INTEGER, YELLOW_CARDS INTEGER, RED_CARDS INTEGER, TACTIC_NAME VARCHAR, RATING_SCORING INTEGER, RATING_PASSING INTEGER, RATING_DEFENDING INTEGER, CONSTRAINT TEAM_STATS_PKEY PRIMARY KEY(MATCH_ID,TEAM_ID), CONSTRAINT TEAM_STATS_MATCH_ID_FKEY FOREIGN KEY(MATCH_ID) REFERENCES MATCHES_TEAM(MATCH_ID) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE PLAYERS_STATS( MATCH_ID INTEGER, TEAM_ID INTEGER, PLAYER_ID INTEGER, NUMBER INTEGER, FORMATION INTEGER, TIME_IN INTEGER, TIME_OUT INTEGER, YELLOW_CARDS INTEGER, RED_CARDS INTEGER, IS_INJURED INTEGER, GOALS INTEGER, ASSISTS INTEGER, FOULS INTEGER, SHOOTS INTEGER, RATING INTEGER, TIME_PLAYING INTEGER, TIME_DEFENDING INTEGER, CONSTRAINT PLAYERS_STATS_MATCH_ID_FKEY FOREIGN KEY(MATCH_ID) REFERENCES MATCHES_TEAM(MATCH_ID) ON DELETE CASCADE ON UPDATE CASCADE)
ALTER TABLE system ADD COLUMN team_id INTEGER;
UPDATE SYSTEM SET VERSION = 15;
